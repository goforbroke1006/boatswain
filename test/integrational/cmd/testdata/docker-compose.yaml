version: "3.9"

services:

  node-001: &node-default
    image: docker.io/goforbroke1006/boatswain:latest
    command: node
    volumes:
      - ./blockchain-node001.db:/blockchain.db
    healthcheck:
      test: curl --fail http://localhost:8080/healthz || exit 1
      start_period: 10s
      interval: 15s
      retries: 5
      timeout: 2s

  node-002:
    <<: *node-default
    volumes:
      - ./blockchain-node002.db:/blockchain.db

  node-003:
    <<: *node-default
    ports:
      - "48083:8080"
    volumes:
      - ./blockchain-node003.db:/blockchain.db
